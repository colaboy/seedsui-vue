<template>
<div :class="className" :style="css">
  <DatePicker ref="_refDatePicker" :viewType="type" :data="data" :value="value" :clickOk="onClickDatePickerOk"/>
  <input type="text" style="width:100%" class="input-text" readOnly="true" :value="value" ref="_refDate" :placeholder="placeholder" @click="onClickPicker"/>
</div>
</template>

<script>
export default {
  name: 'InputDate',
  props: {
    type: {
      type: String,
      default: 'date'
    },
    className: {
      type: String,
      default: ''
    },
    css: {
      type: String,
      default: ''
    },
    value: {
      type: String,
      default: ''
    },
    placeholder: {
      type: String,
      default: '请选择日期'
    },
    data: {
      type: Object
    }
  },
  data () {
    return {
      instance: null
    }
  },
  mounted () {
    this.instance = this.$refs._refDatePicker.instance
  },
  methods: {
    onClickPicker (e) {
      this.instance.show()
    },
    onClickDatePickerOk (e) {
      this.$refs._refDate.value = e.activeText
      e.hide()
    }
  }
}
</script>
<style lang="less" scoped>
  @import "../../assets/styles/variables.less";
</style>
